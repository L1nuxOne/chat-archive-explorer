:root {
  color-scheme: light dark;
  --bg: #ffffff;
  --fg: #111111;
  --muted: #666;
  --border: #e3e3e3;
  --panel: #f7f7f7;
  --rowHover: #f0f0f0;
  --accent: #2563eb;
  --btnActive: rgba(37,99,235,.12);
  --btn-bg: #1d4ed8;
  --btn-bg-hover: #1e40af;
  --btn-fg: #ffffff;
  --btn-border: #1d4ed8;
  --btn-border-hover: #1e3a8a;
  --btn-outline: rgba(37, 99, 235, 0.45);
}

html[data-theme="dark"] {
  --bg: #0f1115;
  --fg: #e6e6e6;
  --muted: #9aa0a6;
  --border: #2a2f3a;
  --panel: #161a22;
  --rowHover: #151922;
  --accent: #60a5fa;
  --btnActive: rgba(96,165,250,.18);
  --btn-bg: #3b82f6;
  --btn-bg-hover: #60a5fa;
  --btn-fg: #0b1220;
  --btn-border: #93c5fd;
  --btn-border-hover: #bfdbfe;
  --btn-outline: rgba(148, 197, 253, 0.7);
}

html, body, #root { height: 100%; }
body {
  margin: 0;
  background: var(--bg);
  color: var(--fg);
  font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
}

button {
  font: inherit;
  cursor: pointer;
  border-radius: 8px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-fg);
  padding: 0.35rem 0.75rem;
  transition: background-color 0.18s ease, border-color 0.18s ease, color 0.18s ease, box-shadow 0.18s ease;
}

button:hover:not(:disabled) {
  background: var(--btn-bg-hover);
  border-color: var(--btn-border-hover);
}

button:focus-visible {
  outline: 2px solid var(--btn-outline);
  outline-offset: 2px;
}

button:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

input[type="file"] {
  font: inherit;
  color: var(--fg);
}

input[type="file"]::file-selector-button,
input[type="file"]::-webkit-file-upload-button {
  font: inherit;
  cursor: pointer;
  border-radius: 8px;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-fg);
  padding: 0.35rem 0.75rem;
  margin-right: 10px;
  transition: background-color 0.18s ease, border-color 0.18s ease, color 0.18s ease, box-shadow 0.18s ease;
}

input[type="file"]::file-selector-button:hover,
input[type="file"]::-webkit-file-upload-button:hover {
  background: var(--btn-bg-hover);
  border-color: var(--btn-border-hover);
}

input[type="file"]::file-selector-button:focus-visible,
input[type="file"]::-webkit-file-upload-button:focus-visible {
  outline: 2px solid var(--btn-outline);
  outline-offset: 2px;
}

.btn-ghost {
  background: transparent;
  border-color: var(--border);
  color: var(--fg);
  padding: 0.25rem 0.6rem;
}

.btn-ghost:hover:not(:disabled) {
  background: color-mix(in oklab, var(--accent) 15%, transparent);
  border-color: color-mix(in oklab, var(--accent) 30%, var(--border));
}

.btn-ghost.active {
  background: var(--btnActive);
  border-color: color-mix(in oklab, var(--accent) 45%, var(--border));
}

/* --- Conversation list fixes --- */
.conv-list { display: flex; flex-direction: column; }
.conv-row {
  display: flex; flex-direction: column; gap: 4px;
  padding: 8px 10px;
  border-bottom: 1px solid var(--border);
  cursor: pointer;
}
.conv-row:hover { background: var(--rowHover); }

/* two-line clamp for title; prevents overlap */
.conv-row .title {
  font-size: 14px; line-height: 1.25;
  display: -webkit-box;
  -webkit-line-clamp: 2;       /* clamp to 2 lines */
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* date/subtitle: single-line truncation */
.conv-row .meta {
  font-size: 12px;
  color: var(--muted);
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.conv-row .meta span {
  white-space: nowrap;
}

/* --- Analytics --- */
.bars {
  height: 140px;
  display: flex;
  align-items: end;
  gap: 2px;
  border: 1px solid var(--border);
  padding: 6px;
  background: linear-gradient(to top, transparent 0, transparent 19px, var(--border) 20px);
  background-size: 100% 20px;
  position: relative;
}
.bar {
  width: 6px;
  background: var(--accent);
  opacity: 0.8;
}
.bar:hover { opacity: 1; }

.tooltip {
  position: absolute;
  pointer-events: none;
  background: var(--panel);
  color: var(--fg);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 6px 8px;
  font-size: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
  z-index: 10;
}

.card { border:1px solid var(--border); border-radius:8px; padding:8px; background: var(--panel); }
.card-k { font-size: 12px; color: var(--muted); }
.card-v { font-size: 18px; font-weight: 600; }

.table-wrap { overflow:auto; border:1px solid var(--border); border-radius:8px; }
.table { width:100%; border-collapse: collapse; }
.table th, .table td { padding:8px 10px; border-bottom:1px solid var(--border); text-align:left; }
.table thead th { background: var(--panel); cursor: pointer; }
.row-click { cursor: pointer; }
.row-click:hover { background: var(--rowHover); }
.heat {
  display: grid;
  gap: 2px;
  border: 1px solid var(--border);
  padding: 6px;
  background: var(--panel);
}
.cell { height: 16px; }
